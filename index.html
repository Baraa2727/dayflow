<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DayFlow – Smarte Tagesrouten</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            ink: '#0A0A0A',
            soft: '#F7F7F7',
            line: '#EAEAEA',
            accent: '#111111'
          },
          boxShadow: {
            card: '0 6px 24px rgba(0,0,0,0.06)'
          }
        }
      }
    }
  </script>

  <!-- Markdown Parser -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- Inter Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    body{font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto}
    .prose a{ text-decoration: underline; }
  </style>
</head>
<body class="bg-white text-ink">
  <!-- Header -->
  <header class="border-b border-line">
    <div class="mx-auto max-w-5xl px-5 h-14 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-7 w-7 rounded-full bg-black text-white grid place-items-center text-[11px] font-bold">DF</div>
        <span class="text-sm font-semibold tracking-tight">DayFlow</span>
      </div>
      <nav class="hidden sm:flex items-center gap-6 text-sm text-neutral-500">
        <a class="hover:text-ink" href="#demo">Demo</a>
        <a class="hover:text-ink" href="#features">Funktionen</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="border-b border-line">
    <div class="mx-auto max-w-5xl px-5 py-12 md:py-16">
      <p class="text-xs uppercase tracking-widest text-neutral-500">Tagesrouten, aber richtig</p>
      <h1 class="mt-3 text-4xl md:text-6xl font-semibold leading-tight">
        Dein smarter Tagesablauf<br class="hidden md:block"> mit klarer Route & Flow.
      </h1>
      <p class="mt-4 text-lg text-neutral-600 max-w-2xl">
        Minutengenaue A–F-Stopps, einzeiliger Google-Maps-Link, passende Restaurants und Alternativen.
      </p>

      <div class="mt-7 flex gap-3">
        <a href="#demo" class="inline-flex items-center rounded-lg bg-ink text-white px-4 py-2.5 text-sm font-medium hover:bg-black">
          Jetzt testen
        </a>
        <a href="#features" class="inline-flex items-center rounded-lg border border-line px-4 py-2.5 text-sm font-medium hover:bg-soft">
          Mehr erfahren
        </a>
      </div>
    </div>
  </section>

  <!-- Demo -->
  <main id="demo">
    <div class="mx-auto max-w-5xl px-5 py-12">
      <div class="grid md:grid-cols-5 gap-6">
        <!-- Eingabe -->
        <section class="md:col-span-2 rounded-xl border border-line bg-white shadow-card p-5">
          <h2 class="text-base font-semibold">Wunsch eingeben</h2>
          <form id="f" class="mt-4 flex flex-col gap-3">
            <input
              id="prompt"
              class="rounded-lg border border-line px-3.5 py-2.5 text-[15px] outline-none focus:ring-2 focus:ring-neutral-900/10"
              placeholder="z. B. 1 Tag in Lissabon – Aussicht & vegetarisch"
            />
            <button type="submit" class="rounded-lg bg-ink text-white px-4 py-2.5 text-sm font-medium hover:bg-black">
              Plan generieren
            </button>
          </form>
          <p class="mt-3 text-sm text-neutral-500">
            Tipp: Ziel + Tage + Stil (z. B. „2 Tage Rom, Kultur & Pizza“).
          </p>
        </section>

        <!-- Ausgabe -->
        <section class="md:col-span-3 rounded-xl border border-line bg-white shadow-card p-5">
          <div class="flex items-center justify-between">
            <h3 class="text-base font-semibold">Ausgabe</h3>
            <span class="text-xs text-neutral-500">Mock aktiv</span>
          </div>
          <div id="out" class="prose max-w-none mt-3">
            <p class="text-neutral-500">⬅️ Bitte oben deinen Wunsch eingeben und auf „Plan generieren“ klicken.</p>
          </div>
        </section>
      </div>
    </div>
  </main>

  <!-- Features -->
  <section id="features" class="border-t border-line">
    <div class="mx-auto max-w-5xl px-5 py-12 grid md:grid-cols-3 gap-6">
      <div class="rounded-xl border border-line p-5">
        <h4 class="text-sm font-semibold mb-1">A–F Stopps</h4>
        <p class="text-neutral-600">Klar strukturierte Tagesrouten mit Zeiten & Transfer.</p>
      </div>
      <div class="rounded-xl border border-line p-5">
        <h4 class="text-sm font-semibold mb-1">Maps-Links</h4>
        <p class="text-neutral-600">Einzeiliger Routenlink, klickbare Stopps (Titel & Bild identisch).</p>
      </div>
      <div class="rounded-xl border border-line p-5">
        <h4 class="text-sm font-semibold mb-1">Mock-Modus</h4>
        <p class="text-neutral-600">Kostenlos entwickeln; später mit OpenAI-API live schalten.</p>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="border-t border-line">
    <div class="mx-auto max-w-5xl px-5 py-10 text-center text-sm text-neutral-500">
      © <span id="y"></span> DayFlow
    </div>
  </footer>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    const form = document.getElementById('f');
    const outEl = document.getElementById('out');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const userMessage = document.getElementById('prompt').value.trim();
      if (!userMessage) return;

      outEl.innerHTML = '<p class="text-neutral-500">⏳ Erzeuge Plan …</p>';
      try {
        const res = await fetch('/api/generate', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ userMessage }) // ✅ geändert
        });

        const data = await res.json();
        if (res.ok && data.output) {
          outEl.innerHTML = marked.parse(data.output);
        } else {
          outEl.innerHTML = `<p class="text-red-600">Fehler: ${data.error || 'unbekannt'}</p>`;
        }
      } catch (err) {
        outEl.innerHTML = `<p class="text-red-600">Fehler beim Abruf.</p>`;
      }
    });
  </script>
</body>
</html>
